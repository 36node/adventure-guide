# 评审

```
独乐乐不如众乐乐
编程之美，需要知音
```

## 目标和原则

每一个任务需要通过 PR 提交代码，应经过至少两名项目组成员的评审，通常是对应的 PO 和 CM。

- 提高代码质量，及早发现潜在缺陷，降低修改/弥补缺陷的成本
- 促进团队内部知识共享，提高团队整体水平
- 评审过程对于评审人员来说，也是一种思路重构的过程，帮助更多的人理解系统
- 是一个传递知识的手段，可以让其它并不熟悉代码的人知道作者的意图和想法，从而可以在以后轻松维护代码
- 可以被用来确认自己的设计和实现是一个清楚和简单的
- 鼓励相互学习对方的长处和优点
- 高效迅速完成 Code Review

## Pull Request 的说明

**建议:** 尽快发送 PR 的链接给相关人员，并且将 PR assign 给他们

- 任务完成才能提交 PR
- 严禁一个 PR 里面有多个任务，除非它们是紧密关联的
- PR 提交之后只允许针对 Review 发现问题再次提交代码，除非有充足的理由，严禁在同一个 PR 中再次提交其它任务的代码
- 提交 PR 时候有一个描述框，内容会自动根据 Commit 的 message 合并而成。切记，如果一次提交的内容包含很多 Commit，请不要使用自动生成的描述。请用简短但是足够说明问题的语言（理想是控制在 3 句话之内）来描述： 你改动了什么，解决了什么问题，需要代码审查的人留意那些影响比较大的改动。特别需要留意，如果对基础、公共的组件进行了改动，一定要另起一行特别说明。
- PR 应该在 1~2 个工作日内被合并或者被拒绝

## Code Review Checklist

Code Review 主要检查代码中是否存在以下方面问题：代码的一致性、编码风格、代码的安全问题、代码冗余、是否正确设计以满足需求（功能、性能）等等

- **完整性检查** 代码是否完全实现了设计文档中提出的功能需求代码是否已按照设计文档进行了集成和 Debug 代码是否已创建了需要的数据库，包括正确的初始化数据代码中是否存在任何没有定义或没有引用到的变量、常数或数据类型
- **一致性检查** 代码的逻辑是否符合设计文档代码中使用的格式、符号、结构等风格是否保持一致
- **正确性检查代码** 是否符合制定的标准所有的变量都被正确定义和使用所有的注释都是准确的所有的程序调用都使用了正确的参数个数
- **可修改性检查** 代码涉及到的常量是否易于修改(如使用配置、定义为类常量、使用专门的常量类等)代码中是否包含了交叉说明或数据字典，以描述程序是如何对变量和常量进行访问的代码是否只有一个出口和一个入口（严重的异常处理除外）
- **可预测性检查** 代码所用的开发语言是否具有定义良好的语法和语义是否代码避免了依赖于开发语言缺省提供的功能代码是否无意中陷入了死循环代码是否是否避免了无穷递归
- **健壮性检查** 异常处理和清理（释放）资源代码是否采取措施避免运行时错误（如数组边界溢出、被零除、值越界、堆栈溢出等）
- **结构性检查** 程序的每个功能是否都作为一个可辩识的代码块存在循环是否只有一个入口
- **可追溯性检查** 代码是否对每个程序进行了唯一标识是否有一个交叉引用的框架可以用来在代码和开发文档之间相互对应代码是否包括一个修订历史记录，记录中对代码的修改和原因都有记录是否所有的安全功能都有标识
- **可理解性检查** 注释是否足够清晰的描述每个子程序是否使用到不明确或不必要的复杂代码，它们是否被清楚的注释使用一些统一的格式化技巧（如缩进、空白等）用来增强代码的清晰度是否在定义命名规则时采用了便于记忆，反映类型等方法每个变量都定义了合法的取值范围代码中的算法是否符合开发文档中描述的数学模型
- **可验证性检查** 代码中的实现技术是否便于测试
- **可重用性 DRY（Do not Repeat Yourself）原则** 同一代码不应该重复两次以上考虑可重用的服务，功能和组件考虑通用函数和类
- **可扩展性** 轻松添加功能，对现有代码进行最小的更改。一个组件可以被更好的组件替换
- **安全性** 进行身份验证，授权，输入数据验证，避免诸如 SQL 注入和跨站脚本（XSS）等安全威胁 ，加密敏感数据（密码，信用卡信息等）
- **性能** 使用合适的数据类型，例如 StringBuilder，通用集合类懒加载，异步和并行处理缓存和会话/应用程序数据
